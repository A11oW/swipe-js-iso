!function(t,n){"undefined"!=typeof module&&module.exports?module.exports=n():t.Swipe=n()}(this,function(){"use strict";return function(t,n){function e(){E=x.children,w=E.length,y=E.length<2?!1:n.continuous,f.transitions&&y&&E.length<3&&(x.appendChild(E[0].cloneNode(!0)),x.appendChild(x.children[1].cloneNode(!0)),E=x.children),m=Array(E.length),p=t.getBoundingClientRect().width||t.offsetWidth,x.style.width=E.length*p+"px";for(var e=E.length;e--;){var i=E[e];i.style.width=p+"px",i.setAttribute("data-index",e),f.transitions&&(i.style.left=e*-p+"px",a(e,T>e?-p:e>T?p:0,0))}y&&f.transitions&&(a(r(T-1),-p,0),a(r(T+1),p,0)),f.transitions||(x.style.left=T*-p+"px"),t.style.visibility="visible"}function i(){y?s(T-1):T&&s(T-1)}function o(){y?s(T+1):T<E.length-1&&s(T+1)}function r(t){return(E.length+t%E.length)%E.length}function s(t,e){if(T!=t){if(f.transitions){var i=Math.abs(T-t)/(T-t);if(y){var o=i;i=-m[r(t)]/p,i!==o&&(t=-i*E.length+t)}for(var s=Math.abs(T-t)-1;s--;)a(r((t>T?t:T)-s-1),p*i,0);t=r(t),a(T,p*i,e||L),a(t,0,e||L),y&&a(r(t-i),-(p*i),0)}else t=r(t),c(T*-p,t*-p,e||L);T=t,h(n.callback&&n.callback(T,E[T]))}}function a(t,n,e){d(t,n,e),m[t]=n}function d(t,n,e){var i=E[t],o=i&&i.style;o&&(o.webkitTransitionDuration=o.MozTransitionDuration=o.msTransitionDuration=o.OTransitionDuration=o.transitionDuration=e+"ms",o.webkitTransform="translate("+n+"px,0)translateZ(0)",o.msTransform=o.MozTransform=o.OTransform="translateX("+n+"px)")}function c(t,e,i){if(!i)return void(x.style.left=e+"px");var o=+new Date,r=setInterval(function(){var s=+new Date-o;return s>i?(x.style.left=e+"px",k&&u(),n.transitionEnd&&n.transitionEnd.call(event,T,E[T]),void clearInterval(r)):void(x.style.left=(e-t)*(Math.floor(s/i*100)/100)+t+"px")},4)}function u(){g=setTimeout(o,k)}function l(){k=0,clearTimeout(g)}var v=function(){},h=function(t){setTimeout(t||v,0)},f={addEventListener:!!window.addEventListener,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,transitions:function(t){var n=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var e in n)if(void 0!==t.style[n[e]])return!0;return!1}(document.createElement("swipe"))};if(t){var E,m,p,w,x=t.children[0];n=n||{};var g,b,T=parseInt(n.startSlide,10)||0,L=n.speed||300,y=n.continuous=void 0!==n.continuous?n.continuous:!0,k=n.auto||0,D={},M={},z={handleEvent:function(t){switch(t.type){case"touchstart":this.start(t);break;case"touchmove":this.move(t);break;case"touchend":h(this.end(t));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":h(this.transitionEnd(t));break;case"resize":h(e)}n.stopPropagation&&t.stopPropagation()},start:function(t){var n=t.touches[0];D={x:n.pageX,y:n.pageY,time:+new Date},b=void 0,M={},x.addEventListener("touchmove",this,!1),x.addEventListener("touchend",this,!1)},move:function(t){if(!(t.touches.length>1||t.scale&&1!==t.scale||n.disableScroll)){var e=t.touches[0];M={x:e.pageX-D.x,y:e.pageY-D.y},void 0===b&&(b=!(!b&&Math.abs(M.x)>=Math.abs(M.y))),b||(t.preventDefault(),l(),y?(d(r(T-1),M.x+m[r(T-1)],0),d(T,M.x+m[T],0),d(r(T+1),M.x+m[r(T+1)],0)):(M.x=M.x/(!T&&M.x>0||T==E.length-1&&M.x<0?Math.abs(M.x)/p+1:1),d(T-1,M.x+m[T-1],0),d(T,M.x+m[T],0),d(T+1,M.x+m[T+1],0)),n.swiping&&n.swiping(-M.x/p))}},end:function(){var t=+new Date-D.time,e=250>+t&&Math.abs(M.x)>20||Math.abs(M.x)>p/2,i=!T&&M.x>0||T==E.length-1&&M.x<0;y&&(i=!1);var o=M.x<0;b||(e&&!i?(o?(y?(a(r(T-1),-p,0),a(r(T+2),p,0)):a(T-1,-p,0),a(T,m[T]-p,L),a(r(T+1),m[r(T+1)]-p,L),T=r(T+1)):(y?(a(r(T+1),p,0),a(r(T-2),-p,0)):a(T+1,p,0),a(T,m[T]+p,L),a(r(T-1),m[r(T-1)]+p,L),T=r(T-1)),n.callback&&n.callback(T,E[T])):y?(a(r(T-1),-p,L),a(T,0,L),a(r(T+1),p,L)):(a(T-1,-p,L),a(T,0,L),a(T+1,p,L))),x.removeEventListener("touchmove",z,!1),x.removeEventListener("touchend",z,!1),x.removeEventListener("touchforcechange",function(){},!1)},transitionEnd:function(t){parseInt(t.target.getAttribute("data-index"),10)==T&&(k&&u(),n.transitionEnd&&n.transitionEnd.call(t,T,E[T]))}};return e(),k&&u(),f.addEventListener?(f.touch&&(x.addEventListener("touchstart",z,!1),x.addEventListener("touchforcechange",function(){},!1)),f.transitions&&(x.addEventListener("webkitTransitionEnd",z,!1),x.addEventListener("msTransitionEnd",z,!1),x.addEventListener("oTransitionEnd",z,!1),x.addEventListener("otransitionend",z,!1),x.addEventListener("transitionend",z,!1)),window.addEventListener("resize",z,!1)):window.onresize=function(){e()},{setup:function(){e()},slide:function(t,n){l(),s(t,n)},prev:function(){l(),i()},next:function(){l(),o()},stop:function(){l()},getPos:function(){return T},getNumSlides:function(){return w},kill:function(){l(),x.style.width="",x.style.left="";for(var t=E.length;t--;){var n=E[t];n.style.width="",n.style.left="",f.transitions&&d(t,0,0)}f.addEventListener?(x.removeEventListener("touchstart",z,!1),x.removeEventListener("webkitTransitionEnd",z,!1),x.removeEventListener("msTransitionEnd",z,!1),x.removeEventListener("oTransitionEnd",z,!1),x.removeEventListener("otransitionend",z,!1),x.removeEventListener("transitionend",z,!1),window.removeEventListener("resize",z,!1)):window.onresize=null}}}}});